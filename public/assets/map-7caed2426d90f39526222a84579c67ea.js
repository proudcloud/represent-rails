function resizeList(){newHeight=$("html").height()-$("#menu > .wrapper").height(),$("#list").css("height",newHeight+"px")}function initialize(){var e=[{featureType:"road",elementType:"geometry",stylers:[{hue:"#8800ff"},{lightness:100}]},{featureType:"road",stylers:[{visibility:"on"},{hue:"#91ff00"},{saturation:-62},{gamma:1.98},{lightness:45}]},{featureType:"water",stylers:[{hue:"#005eff"},{gamma:.72},{lightness:42}]},{featureType:"transit.line",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",stylers:[{visibility:"on"}]},{featureType:"administrative.neighborhood",elementType:"geometry",stylers:[{visibility:"simplified"}]},{featureType:"landscape",stylers:[{visibility:"on"},{gamma:.41},{lightness:46}]},{featureType:"administrative.neighborhood",elementType:"labels.text",stylers:[{visibility:"on"},{saturation:33},{lightness:20}]}],t={zoom:6,center:new google.maps.LatLng(13,124),mapTypeId:google.maps.MapTypeId.ROADMAP,panControl:!1,streetViewControl:!1,mapTypeControl:!1,zoomControl:zoomControl,styles:e,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.TOP_LEFT}};map=new google.maps.Map(document.getElementById("map_canvas"),t),zoomLevel=map.getZoom(),infowindow=new google.maps.InfoWindow({content:"holding..."}),google.maps.event.addListener(map,"zoom_changed",function(){zoomLevel=map.getZoom(),zoomLevel<=15?$(".marker_label").css("display","none"):$(".marker_label").css("display","inline")}),markers=new Array,markers=gon.places,jQuery.each(markers,function(e,t){infowindow=new google.maps.InfoWindow({content:""}),rand_x=Math.random(),rand_y=Math.random(),t[2]=parseFloat(t[2])+parseFloat(parseFloat(rand_x)/6e3),t[3]=parseFloat(t[3])+parseFloat(parseFloat(rand_y)/6e3);if(agent=="iphone")var n=new google.maps.Size(16,19);else n=null;var r=new google.maps.MarkerImage("./images/icons/"+t[1]+".png",null,null,null,n),i=new google.maps.Marker({position:new google.maps.LatLng(t[2],t[3]),map:map,title:"",clickable:!0,infoWindowHtml:"",zIndex:10+e,icon:r});i.type=t[1],gmarkers.push(i),markerTitles.push(t[0]),agent=="default"&&(google.maps.event.addListener(i,"mouseover",function(){this.old_ZIndex=this.getZIndex(),this.setZIndex(9999),$("#marker"+e).css("display","inline"),$("#marker"+e).css("z-index","99999")}),google.maps.event.addListener(i,"mouseout",function(){this.old_ZIndex&&zoomLevel<=15&&(this.setZIndex(this.old_ZIndex),$("#marker"+e).css("display","none"))}));var s=t[5];s.substr(0,7)!="http://"&&(s="http://"+s);var o=s.replace("http://",""),o=o.replace("www.","");google.maps.event.addListener(i,"click",function(){t[1]=="event"?infowindow.setContent("<div class='marker_title'>"+t[0]+"</div>"+"<div class='marker_uri'><a target='_blank' href='"+s+"'>"+o+"</a></div>"+"<div class='marker_desc'>"+t[4]+"</div>"+"<div class='marker_date'>"+t[7]+"</div>"+"<div class='marker_address'>"+t[6]+"</div>"):infowindow.setContent("<div class='marker_title'>"+t[0]+"</div>"+"<div class='marker_uri'><a target='_blank' href='"+s+"'>"+o+"</a></div>"+"<div class='marker_desc'>"+t[4]+"</div>"+"<div class='marker_address'>"+t[6]+"</div>"),infowindow.open(map,this)});var u=new google.maps.LatLng(t[2],t[3]),a=new Label({map:map,id:e});a.bindTo("position",i),a.set("text",t[0]),a.bindTo("visible",i),a.bindTo("clickable",i),a.bindTo("zIndex",i)}),$("#search").typeahead({source:markerTitles,onselect:function(e){marker_id=jQuery.inArray(e,markerTitles),marker_id>-1&&(map.panTo(gmarkers[marker_id].getPosition()),map.setZoom(15),google.maps.event.trigger(gmarkers[marker_id],"click")),$("#search").val("")}})}function goToMarker(e){e&&(map.panTo(gmarkers[e].getPosition()),map.setZoom(17),google.maps.event.trigger(gmarkers[e],"click"))}function toggle(e){$("#filter_"+e).is(".inactive")?show(e):hide(e)}function hide(e){for(var t=0;t<gmarkers.length;t++)gmarkers[t].type==e&&gmarkers[t].setVisible(!1);$("#filter_"+e).addClass("inactive")}function show(e){for(var t=0;t<gmarkers.length;t++)gmarkers[t].type==e&&gmarkers[t].setVisible(!0);$("#filter_"+e).removeClass("inactive")}function toggleList(e){$("#list .list-"+e).toggle()}function markerListMouseOver(e){$("#marker"+e).css("display","inline")}function markerListMouseOut(e){$("#marker"+e).css("display","none")}var map,infowindow=null,gmarkers=[],markerTitles=[],highestZIndex=0,agent="default",zoomControl=!0;$(document).ready(function(){if(navigator.userAgent.toLowerCase().indexOf("iphone")>-1||navigator.userAgent.toLowerCase().indexOf("ipod")>-1)agent="iphone",zoomControl=!1;navigator.userAgent.toLowerCase().indexOf("ipad")>-1&&(agent="ipad",zoomControl=!1)}),$(document).ready(function(){newHeight=$("html").height()-$("#menu > .wrapper").height(),$("#list").css("height",newHeight+"px")}),$(window).resize(function(){resizeList()}),google.maps.event.addDomListener(window,"load",initialize);